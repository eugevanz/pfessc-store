<div>
    {% if not is_feat %}
    <div class="uk-inline uk-flex-right uk-margin-bottom">
        <a class="uk-icon-button" href uk-icon="settings"></a>
        <div uk-dropdown="mode: click">
            <form style="font-size: 0.7em;">
                <div class="uk-flex uk-flex-wrap">
                    <div class="uk-text-bold">Sort by</div>
                    <select class="uk-select uk-form-blank uk-form-small">
                        <option>Price low to high</option>
                        <option>Price high to low</option>
                    </select>
                </div>
            </form>
        </div>
    </div>
    {% endif %}
    <div class="uk-flex uk-flex-wrap uk-flex-center"
         uk-scrollspy="cls: uk-animation-scale-up uk-transform-origin-top-center; target: .uk-card; delay: 25; repeat: true">
        {% for item in products %}
        <div _="on load get (window.outerWidth) as an Int
                 if it is greater than 768
                 then set my *width to 190px
                 then add .uk-padding-small" class="uk-card uk-card-small"
             style="width: 133px;">
            <form id="prod-detail" action="/product-detail" method="post">
                <input value="{{ item }}" name="product" type="hidden">
                <button class="uk-card-media-top uk-button uk-button-link" type="submit">
                    <img alt="" height="1024" src="{{ item.images[0].urls[0].url|default(default_img) }}" width="1024">
                </button>
            </form>
            <div class="uk-card-body">
                <div class="uk-card-title"
                     style="height: 52px; line-height: 1.2; font-size: 0.9em; overflow: hidden;">
                    {{ item.productName|default('No product name') }}
                </div>
                <div class="uk-flex uk-flex-wrap uk-flex-middle uk-margin-small"
                     style="height: 18px; overflow: hidden;">
                    {% for colour in item.variants|avail_colours %}
                    <span class="uk-border-circle clr-brief" style="background-color: {{ colour|colour_filter }};">
                        </span>
                    {% endfor %}
                </div>
                <div class="uk-margin-small-top uk-flex uk-flex-middle uk-flex-between">
                    <div class="uk-text-bold uk-text-nowrap"
                         style="font-size: 0.8em;">
                        {% if item.price %}R {{ item.price }}{% else %}Sold Out{% endif %}
                    </div>
                    <a class="uk-icon-button" href="/add-to-cart/{{ item['simpleCode'] }}" uk-icon="cart"></a>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% if not is_feat %}
    <nav aria-label="Pagination">
        <ul class="uk-pagination uk-flex-right uk-margin-medium-top">
            {% if page > 1 %}
            <li>
                <a href="#products" hx-get="/products-grid?page={{ page - 1 }}" hx-target="#products-grid" uk-scroll>
                    <span class="uk-margin-small-right" uk-pagination-previous></span>
                    <span>Previous</span>
                </a>
            </li>
            {% endif %}
            <li>
                <input aria-label="Page" class="uk-input uk-form-width-small uk-form-large uk-text-center"
                       hx-get="/products-grid" hx-target="#products-grid" hx-trigger="keyup changed delay:1s" name="page"
                       type="text" value="{{ page }}">
            </li>
            {% if products %}
            <li>
                <a href="#products" hx-get="/products-grid?page={{ page + 1 }}" hx-target="#products-grid" uk-scroll>
                    <span>Next</span>
                    <span class="uk-margin-small-left" uk-pagination-next></span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>

