<div>
    {% if not is_feat %}
    <div class="uk-inline uk-flex-right uk-margin-bottom">
        <a href class="uk-icon-button" uk-icon="settings"></a>
        <div uk-dropdown="mode: click">
            <form style="font-size: 0.7em;">
                <div class="uk-flex uk-flex-wrap">
                    <div class="uk-text-bold">Sort by</div>
                    <select class="uk-select uk-form-blank uk-form-small">
                        <option>Price low to high</option>
                        <option>Price high to low</option>
                    </select>
                </div>
            </form>
        </div>
    </div>
    {% endif %}
    <div class="uk-flex uk-flex-wrap uk-flex-center"
        uk-scrollspy="cls: uk-animation-scale-up uk-transform-origin-top-center; target: .uk-card; delay: 25; repeat: true">
        {% for item in products %}
            <div class="uk-card uk-card-small" style="width: 133px;"
                 _="on load get (window.outerWidth) as an Int
                 if it is greater than 768
                 then set my *width to 190px
                 then add .uk-padding-small">
                <a href="/product-detail?code={{ item.fullCode }}" class="uk-card-media-top">
                    <img src="{{ item.images[0].urls[0].url|default(default_img) }}" width="1024" height="1024" alt="">
                </a>
                <div class="uk-card-body">
                    <div class="uk-card-title"
                         style="height: 52px; line-height: 1.2; font-size: 0.9em; overflow: hidden;">
                        {{ item.productName|default('No product name') }}
                    </div>
                    <div class="uk-flex uk-flex-wrap uk-flex-middle uk-margin-small"
                         style="height: 18px; overflow: hidden;">
                        {% for colour in item.variants|avail_colours %}
                        <span class="uk-border-circle clr-brief" style="background-color: {{ colour|colour_filter }};">
                        </span>
                        {% endfor %}
                    </div>
                    <div class="uk-margin-small-top uk-flex uk-flex-middle uk-flex-between">
                        <div class="uk-text-bold uk-text-nowrap"
                             style="font-size: 0.8em;">
                            {% if item.price %}R {{ item.price }}{% else %}Sold Out{% endif %}
                        </div>
                        <a href="/add-to-cart/{{ item['simpleCode'] }}" class="uk-icon-button" uk-icon="cart"></a>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
    {% if not is_feat %}
    <nav aria-label="Pagination">
        <ul class="uk-pagination uk-flex-right uk-margin-medium-top">
            {% if page > 1 %}
            <li>
                <a href="#products" hx-get="/products-grid?page={{ page - 1 }}" hx-target="#products-grid" uk-scroll>
                    <span class="uk-margin-small-right" uk-pagination-previous></span>
                    <span>Previous</span>
                </a>
            </li>
            {% endif %}
            <li>
                <input class="uk-input uk-form-width-small uk-form-large uk-text-center" type="text"
                       value="{{ page }}" name="page" aria-label="Page" hx-get="/products-grid"
                       hx-trigger="keyup changed delay:1s" hx-target="#products-grid">
            </li>
            {% if products %}
            <li>
                <a href="#products" hx-get="/products-grid?page={{ page + 1 }}" hx-target="#products-grid" uk-scroll>
                    <span>Next</span>
                    <span class="uk-margin-small-left" uk-pagination-next></span>
                </a>
            </li>
            {% endif %}
        </ul>
    </nav>
    {% endif %}
</div>

